<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=350">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <style>
    /* Popup-specific layout */
    body {
      width: 350px;
    }

    .header {
      justify-content: space-between;
    }

    .status {
      margin-top: 10px;
      margin-bottom: 4px;
    }
  </style>
</head>

<body data-theme="auto">
  <!-- Header -->
  <div class="header">
    <div class="header-left">
      <div class="header-title">
        <img src="icons/icon48.png" alt="ntfy" style="width: 20px; height: 20px;">
        <span id="header-text">Send to ntfy</span>
      </div>
    </div>
    <div class="header-actions">
      <button class="back-btn" id="back-btn" title="Back">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
          <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
        </svg>
      </button>
      <button class="icon-btn" id="open-url-btn" title="Open in ntfy">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
          <path
            d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z" />
        </svg>
      </button>
      <button class="icon-btn" id="settings-btn" title="Settings">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
          <path
            d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.49l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z" />
        </svg>
      </button>
    </div>
  </div>

  <!-- Main View -->
  <div class="view active" id="main-view">
    <div class="main-content" id="main-content">
      <!-- Topic Selection -->
      <div class="form-group">
        <label class="form-label">Topic</label>
        <div class="custom-dropdown" id="topic-dropdown">
          <div class="custom-dropdown-selected" id="topic-dropdown-selected">
            <span id="topic-dropdown-text">Select topic...</span>
          </div>
          <div class="custom-dropdown-arrow">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12">
              <path d="M2 4l4 4 4-4" />
            </svg>
          </div>
          <div class="custom-dropdown-options" id="topic-dropdown-options"></div>
        </div>
        <select class="form-select" id="topic-select"></select>
      </div>

      <!-- Title (Optional) -->
      <div class="form-group">
        <label class="form-label" for="title-input">Title</label>
        <input type="text" class="form-input" id="title-input" placeholder="Notification title...">
      </div>

      <!-- Message -->
      <div class="form-group">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <label class="form-label" for="message-input">Message</label>
          <button type="button" id="insert-url-btn" class="insert-url-btn" title="Insert current page URL">
            üîó Insert URL
          </button>
        </div>
        <textarea class="form-textarea" id="message-input" placeholder="Your message..." rows="3"></textarea>
      </div>

      <!-- File Attachment -->
      <div class="file-section">
        <div class="file-input-wrapper">
          <input type="file" class="file-input" id="file-input">
          <button class="file-btn" id="file-btn">
            üìé Attach file
          </button>
        </div>
        <div class="file-preview" id="file-preview">
          <span class="file-icon">üìÑ</span>
          <div class="file-info">
            <div class="file-name" id="file-name"></div>
            <div class="file-size" id="file-size"></div>
          </div>
          <button class="file-remove" id="file-remove" title="Remove file">√ó</button>
        </div>
      </div>

      <!-- Advanced Options Toggle -->
      <div class="advanced-toggle" id="advanced-toggle">
        <span class="arrow">‚ñ∂</span>
        Advanced options
      </div>

      <!-- Advanced Options -->
      <div class="advanced-options" id="advanced-options">
        <!-- Priority -->
        <div class="form-group">
          <label class="form-label">Priority</label>
          <div class="chips" id="priority-chips">
            <button class="chip" data-priority="1"><span class="p-icon">‚áä</span>Min</button>
            <button class="chip" data-priority="2"><span class="p-icon">‚Üì</span>Low</button>
            <button class="chip active" data-priority="3">Default</button>
            <button class="chip" data-priority="4"><span class="p-icon">‚Üë</span>High</button>
            <button class="chip" data-priority="5"><span class="p-icon">‚áà</span>Urgent</button>
          </div>
        </div>

        <!-- Tags -->
        <div class="form-group">
          <label class="form-label">Tags</label>
          <div class="tags-container" id="tags-container">
            <input type="text" class="tag-input-field" id="new-tag-input" placeholder="Press enter to add tag">
          </div>
        </div>
      </div>

      <!-- Send Footer -->
      <div class="send-footer">
        <div class="send-another-group">
          <input type="checkbox" id="send-another-checkbox">
          <label for="send-another-checkbox">Send another</label>
        </div>
        <button class="send-btn" id="send-btn">Send</button>
      </div>

      <!-- Status Message -->
      <div class="status" id="status"></div>
    </div>
  </div>

  <!-- Settings View -->
  <div class="view" id="settings-view">
    <div class="main-content">




      <div class="form-group">
        <label class="form-label" for="url-input">Server URL</label>
        <input type="text" class="form-input" id="url-input" placeholder="https://ntfy.sh">
        <p class="form-hint">Base URL of your ntfy server</p>
      </div>

      <div class="form-group">
        <label class="form-label" for="token-input">Access Token (optional)</label>
        <input type="password" class="form-input" id="token-input" placeholder="tk_...">
        <p class="form-hint">For private topics or authenticated servers</p>
      </div>

      <div class="divider"></div>

      <div class="form-label">Topics</div>

      <div class="form-group">

        <div class="topics-container" id="topics-container">
          <input type="text" class="topic-input-field" id="new-topic-input" placeholder="Press enter to add topic">
        </div>
      </div>



      <div class="divider"></div>

      <div class="form-label">Appearance</div>
      <div class="form-group">
        <div class="chips" id="theme-chips">
          <button class="chip" data-theme="light">‚òÄÔ∏è Light</button>
          <button class="chip" data-theme="dark">üåô Dark</button>
          <button class="chip active" data-theme="auto">üîÑ Auto</button>
        </div>
      </div>

      <!-- Save button removed for auto-save -->
      <div class="status" id="settings-status"></div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>

</html>